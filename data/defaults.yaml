---
ntp::servers:
  - sesi-ntp1.inria.fr
  - sesi-ntp2.inria.fr

locales::default_locale: C.UTF-8
locales::installed_locales:
  - C.UTF-8 UTF-8
  - en_US.UTF-8 UTF-8
  - fr_FR.UTF-8 UTF-8
  - it_IT.UTF-8 UTF-8

packages::base_packages:
  - vim
  - etckeeper
  - molly-guard
  - moreutils
packages::extra_packages: [] # to be overridden in server-specific data files

users::base_users:
  root:
    uid: 0
    full_name:
    shell: /bin/bash
    groups: []
    authorized_keys:
      root@louvre:
        type: ssh-rsa
        key: AAAAB3NzaC1yc2EAAAADAQABAAABAQDMLEWHlUQldlvZs5rg0y42lRNAfOhD+6pmO8a73DzpJWHTqvAlfteLpU78IPjSacB4dO5ish1E/1RX/HC+Bt8p2v4RBqbCnVLx2w+Hx4ahWu6qbeTVmTz+U++1SQrHnL08fSlhT0OekCw0lRZM2sQq21FZi6+vul97Ecikag4Xaw6Qfumylu94pM3t05uzTUlKk1+6VMCjhT8dlSe8VS8OirVQpE/OqYtTMAWtQaMXGHPCsqDdYRAKzkJ8GjH7ydZmX5VCRyqS0RvPKAlcJfLCs5HBtv0u5rbeGtiHhuzhj/j3YgS/6NJOC2mUfcetcDOMPLnhkKpnF0vUAzTsJ7aR
  zack:
    uid: 1000
    full_name: Stefano Zacchiroli
    shell: /bin/bash
    groups:
      - swhdev
      - sudo
    authorized_keys:
      zack@aquarium:
        type: ssh-rsa
        key: AAAAB3NzaC1yc2EAAAABIwAAAgEAwHDrj8B6DeStBwz0sLeH+gbmnyqDqS2s+slGpkSdXaKMjQRS50YWU0oOSYkZcg1RoL7G85XE7t9JhHiumHC649k0lsdcS4h8nQBVsYKfpLkJy4bm0ru2mTkwrK4j165yZ3n5ygYPwi+IGfgYIz0bmN3LNrFM60H7VGYe7UouvFpvA+wIqURU7rX3K+ZNdWVkO4CAGoHs3mS/M88HfsADvS3jotRuoC43FTbcSaIw0/riaTyBTcy/N2Q7Muag6dGSwwuFRsp3uBX4jLre0+bf/jrqLWECY2KAlottfKePsOtQe8vy7Hj7xURwf8AJQ3lVTG1vPC4df8c7c09aTlyUH1sHN5gO7ZO3QU9wpQQFsp5jfoSSZzRGSw8HjsJaTKvl6Kte6VvtBKsUOTjxxuvfdRQXiPsmP+eLgtNDWnIo84mdhnlbeTOS85E5CfLHEh6dSbV2P1Gv/ZSFfkCGghmAbSQa01lRAXmFM+JHtEe+sUdbnZ2aQuM4OLuq8trXBs4lA8rvzxReot/zohFLX1Ys+dRKT2G64RzfYIOUaFGG2ZYSA5lT6jvSM2OGXpzlavJjz+Q9BydnCRVVRu2aCRWj0farOvJR4rRGdF7fj1XYJWNwoCzAaJAaiuC7Zl+zwbeZfDmImVR5/OZE0mfDPGcgiGdQiR7YvMYolytpXjtS0zc=
  olasd:
    uid: 1001
    full_name: Nicolas Dandrimont
    shell: /bin/bash
    groups:
      - swhdev
      - sudo
    authorized_keys:
      nicolasd@darboux:
        type: ssh-rsa
        key: AAAAB3NzaC1yc2EAAAADAQABAAABAQDZ1TCpfzrvxLhEMhxjbxqPDCwY0nazIr1cyIbhGD2bUdAbZqVMdNtr7MeDnlLIKrIPJWuvltauvLNkYU0iLc1jMntdBCBM3hgXjmTyDtc8XvXseeBp5tDqccYNR/cnDUuweNcL5tfeu5kzaAg3DFi5Dsncs5hQK5KQ8CPKWcacPjEk4ir9gdFrtKG1rZmg/wi7YbfxrJYWzb171hdV13gSgyXdsG5UAFsNyxsKSztulcLKxvbmDgYbzytr38FK2udRk7WuqPbtEAW1zV4yrBXBSB/uw8EAMi+wwvLTwyUcEl4u0CTlhREljUx8LhYrsQUCrBcmoPAmlnLCD5Q9XrGH
  ardumont:
    uid: 1003
    full_name: Antoine R. Dumont
    shell: /bin/bash
    groups:
      - swhdev
      - sudo
  swhworker:
    uid: 1004
    full_name: SWH Worker Acccount
    shell: /bin/bash

users::extra_users: {}

groups::base_groups:
  swhdev:
    gid: 1002
  sudo:
    gid: 27 # assigned from base-files

groups::extra_groups: {}

munin::node::allow:
  - 192.168.100.29

munin::master::hostname: munin.internal.softwareheritage.org

munin::plugins::rabbitmq::messages_warn: 1800000
munin::plugins::rabbitmq::messages_crit: 2000000
munin::plugins::rabbitmq::queue_memory_warn: 1073741824 # 1GB
munin::plugins::rabbitmq::queue_memory_crit: 2147483648 # 2GB

puppet::master::hostname: pergamon.internal.softwareheritage.org

bind::update_key: local-update

bind::zones:
  internal.softwareheritage.org:
    domain: internal.softwareheritage.org
  100.168.192.in-addr.arpa:
    domain: 100.168.192.in-addr.arpa
  101.168.192.in-addr.arpa:
    domain: 101.168.192.in-addr.arpa

bind::zones::default_data:
  zone_type: master
  dynamic: true
  masters: ''
  transfer_source: ''
  allow_updates: []
  update_policies: ''
  allow_transfers: ''
  dnssec: false
  key_directory: ''
  ns_notify: true
  also_notify: ''
  allow_notify: ''
  forwarders: ''
  forward: ''
  source: ''

bind::resource_records:
  internal/NS:
    type: NS
    record: internal.softwareheritage.org
    data: pergamon.internal.softwareheritage.org.
  100/NS:
    type: NS
    record: 101.168.192.in-addr.arpa
    data: pergamon.internal.softwareheritage.org.
  101/NS:
    type: NS
    record: 101.168.192.in-addr.arpa
    data: pergamon.internal.softwareheritage.org.
# VPN hosts
  zack/A:
    record: zack.internal.softwareheritage.org
    data: 192.168.101.6
  olasd/A:
    record: olasd.internal.softwareheritage.org
    data: 192.168.101.10
  ardumont/A:
    record: ardumont.internal.softwareheritage.org
    data: 192.168.101.14
  rdicosmo/A:
    record: rdicosmo.internal.softwareheritage.org
    data: 192.168.101.38
  awork01/A:
    record: awork01.internal.softwareheritage.org
    data: 192.168.101.18
  awork02/A:
    record: awork02.internal.softwareheritage.org
    data: 192.168.101.22
  awork03/A:
    record: awork03.internal.softwareheritage.org
    data: 192.168.101.26
  awork04/A:
    record: awork04.internal.softwareheritage.org
    data: 192.168.101.30
  awork05/A:
    record: awork05.internal.softwareheritage.org
    data: 192.168.101.34

bind::resource_records::default_data:
  type: A

bind::forwarders:
  - 193.51.196.130
  - 193.51.196.131

bind::clients:
  - 192.168.100.0/24
  - 192.168.101.0/24
  - 127.0.0.0/8
  - '::1/128'

bind::autogenerate:
  '192.168.100.0/24': internal.softwareheritage.org

dar::backup::storage: /srv/backups
dar::backup::num_backups: 1
dar::backup::base: /
dar::backup::select: [] # empty list = full backup
dar::backup::exclude:
 - dev
 - proc
 - run
 - srv/backups
 - srv/remote-backups
 - srv/softwareheritage/postgres
 - srv/storage
 - sys
 - tmp
 - var/cache
 - var/run
 - var/tmp
dar::backup::options:
 - -zbzip2

dar::cron::hour: 0
dar::cron::minute: fqdn_rand
dar::cron::month: '*'
dar::cron::monthday: '*'
dar::cron::weekday: '*'

dar_server::backup::storage: /srv/remote-backups
dar_server::cron::hour: '0-4'
dar_server::cron::minute: '*/10'
dar_server::cron::month: '*'
dar_server::cron::monthday: '*'
dar_server::cron::weekday: '*'
