dar::backup::exclude:
  - srv/softwareheritage/annex

# Deploy the storage server as a public resource
swh::deploy::storage::uwsgi::listen: 0.0.0.0:5002
swh::deploy::storage::uwsgi::workers: 32
swh::deploy::storage::config:
  storage:
    cls: local
    args:
      db: "host=%{hiera('swh::deploy::storage::db::host')} user=%{hiera('swh::deploy::storage::db::user')} dbname=%{hiera('swh::deploy::storage::db::dbname')} password=%{hiera('swh::deploy::storage::db::password')}"
      objstorage:
        cls: pathslicing
        args:
          root: "%{hiera('swh::deploy::storage::directory')}"
          slicing: "0:2/2:4/4:6"

# open objstorage api
swh::deploy::objstorage::uwsgi::listen: 0.0.0.0:5003
swh::deploy::objstorage::uwsgi::workers: 16

swh::deploy::worker::instances:
  - swh_storage_archiver
  - swh_storage_archiver_azure
  - swh_provenance_cache

icinga2::host::vars:
  load: high
